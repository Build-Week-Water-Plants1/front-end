(this["webpackJsonpwater-plants"]=this["webpackJsonpwater-plants"]||[]).push([[0],{161:function(e,t,a){e.exports=a(305)},166:function(e,t,a){},167:function(e,t,a){},305:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),o=a.n(c),l=(a(166),a(33)),s=a(19),u=a(28),i=a(32),m=a(9),p=(a(167),a(132)),g=a.n(p),f=function(){var e=window.localStorage.getItem("token");return console.log("Token is ".concat(e)),g.a.create({baseURL:"https://water-my-plants3.herokuapp.com/api",headers:{Authorization:e}})},d=function(e){var t=Object(m.f)();return r.a.createElement("div",{className:"d-flex justify-content-center "},r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),f().post("/auth/login",e.currentUser).then((function(a){window.localStorage.setItem("token",a.data.jwt_token),console.log(a.data.jwt_token),e.setCurrentUser(Object(s.a)(Object(s.a)({},e.currentUser),{},{id:a.data.id})),console.log(a),t.push("/plantsform")})).catch((function(e){console.log(e.message)}))}},r.a.createElement("input",{className:"form-control",type:"text",name:"username",value:e.currentUser.username,placeholder:"Username",onChange:function(t){t.persist(),e.handleUserChange(t)}}),r.a.createElement("input",{className:"form-control",type:"password",name:"password",value:e.currentUser.password,placeholder:"Password",onChange:function(t){t.persist(),e.handleUserChange(t)}}),r.a.createElement("button",{className:"btn btn-primary btn-lg btn-block mt-3"},"Log in")))},b=a(67),E=Object(b.b)(null,{PostRegister:function(e){return function(t){f().post("/register",e).then((function(e){console.log(e.data),t({type:"POST_REGISTER",payload:e.data})})).catch((function(e){return console.log("Error!!!",e)}))}}})((function(e){var t=Object(n.useState)({username:"",password:"",Number:""}),a=Object(u.a)(t,2),c=a[0],o=a[1],i=function(e){console.log(c),o(Object(s.a)(Object(s.a)({},c),{},Object(l.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"d-flex justify-content-center "},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.history.push("/login"),e.PostRegister(c),o({username:"",password:"",Number:""})}},r.a.createElement("h1",null,"Register Here"),r.a.createElement("input",{className:"form-control",name:"username",placeholder:"username",value:c.username,onChange:i}),r.a.createElement("input",{className:"form-control",name:"password",placeholder:"password",value:c.password,onChange:i}),r.a.createElement("input",{className:"form-control",name:"Number",placeholder:"number",value:c.Number,onChange:i}),r.a.createElement("button",{className:"btn btn-block btn-primary mt-3",type:"submit",onClick:e.getFriend},"Submit")))}));function h(){return r.a.createElement("ul",{className:"mr-5 justify-content-center"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(i.b,{to:"/register"},"Register")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(i.b,{to:"/login"},"Login")))}var v=a(44),O=function(e){var t=v.a().shape({nickname:v.b().required("Nickname is a required field."),species_name:v.b().required("Species name is a required field."),H2Ofrequency:v.b().required("You must describe how often to water your plant"),image:v.b().url().required("must include a plant image URL")}),a={nickname:"",H2Ofrequency:"",image:"",species_name:"",user_id:e.currentUser.id},c=Object(n.useState)(a),o=Object(u.a)(c,2),i=o[0],m=o[1],p=Object(n.useState)(!1),g=Object(u.a)(p,2),d=g[0],b=g[1];Object(n.useEffect)((function(){t.isValid(i).then((function(e){b(e)}))}),[i,t]);var E=function(e){m(Object(s.a)(Object(s.a)({},i),{},Object(l.a)({},e.target.name,e.target.value))),console.log(i)},h=function(t){t.preventDefault(),!0===d?(console.log(e.currentUser.id),console.log(i),f().post("/users/".concat(e.currentUser.id,"/plants"),i).then((function(e){console.log(i),console.log(e)})).catch((function(e){console.log(e.message)})),m(Object(s.a)({},a))):alert("You must validly complete all inputs before submitting")};return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:h},r.a.createElement("h1",null,"Add a New Plant!"),r.a.createElement("div",{class:"form-group"},"Nickname: ",r.a.createElement("input",{type:"text",name:"nickname",value:i.nickname,onChange:E})),r.a.createElement("div",{class:"form-group"},"Species: ",r.a.createElement("input",{type:"text",name:"species_name",value:i.species_name,onChange:E})),r.a.createElement("div",{class:"form-group"},"How Often To Water Your Plant: ",r.a.createElement("input",{type:"text",name:"H2Ofrequency",value:i.H2Ofrequency,onChange:E})),r.a.createElement("div",{class:"form-group"},"Image (URL): ",r.a.createElement("input",{type:"url",name:"image",value:i.image,onChange:E})),r.a.createElement("button",{class:"btn btn-primary",onClick:h},"Submit")))},j=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){f().get("/users/".concat(e.currentUser.id,"/plants")).then((function(e){o(e.data),console.log(e)})).catch((function(e){console.log(e.message)}))}),[e.currentUser.id]),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Your Plants:"),c.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("img",{class:"img-fluid",src:e.image,alt:"".concat(e.nickname)}),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{class:"list-group-item"},"Nickname: ",e.nickname," "),r.a.createElement("li",{class:"list-group-item"},"Species: ",e.species_name," "),r.a.createElement("li",{class:"list-group-item"},"How often to water: ",e.H2Ofrequency)))})))},y=a(137),w=a(138),k=a(151),N=a(149),S=a(310),U=function(e){Object(k.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={navigate:!1},e.logout=function(){window.localStorage.clear("token"),e.setState({navigate:!0})},e}return Object(w.a)(a,[{key:"render",value:function(){return this.state.navigate?r.a.createElement(m.a,{to:"/login",push:!0}):r.a.createElement(S.a,{variant:"primary",onClick:this.logout},"Log out")}}]),a}(n.Component),C=a(152),x=function(e){var t=e.component,a=Object(C.a)(e,["component"]);return r.a.createElement(m.b,Object.assign({},a,{render:function(e){return window.localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))};var q=function(){var e=Object(n.useState)({username:"",password:"",id:null}),t=Object(u.a)(e,2),a=t[0],c=t[1];return r.a.createElement(i.a,null,r.a.createElement("div",{className:"App container-fluid p-5 mt-5"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h1",null,"Water My Plants")),r.a.createElement(h,null),r.a.createElement(m.b,{exact:!0,path:"/",component:h}),r.a.createElement(m.b,{exact:!0,path:"/register",component:E}),r.a.createElement(m.b,{exact:!0,path:"/login",component:d},r.a.createElement(d,{currentUser:a,handleUserChange:function(e){c(Object(s.a)(Object(s.a)({},a),{},Object(l.a)({},e.target.name,e.target.value)))},setCurrentUser:c})),r.a.createElement(x,{exact:!0,path:"/plantsform"},r.a.createElement(U,{setCurrentUser:c})),r.a.createElement(x,{exact:!0,path:"/plantsform"},r.a.createElement(j,{currentUser:a})),r.a.createElement(x,{exact:!0,path:"/plantsform"},r.a.createElement(O,{currentUser:a}))))},R=a(148),_=a(51),P=a(150),H=[],I=Object(_.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_REGISTER":return[].concat(Object(P.a)(e),[t.payload]);default:return e}}),Object(_.a)(R.a));o.a.render(r.a.createElement(b.a,{store:I},r.a.createElement(q,null)),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.aa4224bb.chunk.js.map